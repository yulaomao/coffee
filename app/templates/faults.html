{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-2">
  <h3 class="m-0">故障列表</h3>
  <a class="btn btn-outline-secondary" href="/api/faults?format=csv">导出 CSV</a>
  </div>
<table class="table table-striped table-sm">
  <thead><tr><th>ID</th><th>设备</th><th>级别</th><th>代码</th><th>消息</th><th>时间</th></tr></thead>
  <tbody>
    {% for f in faults %}
    <tr><td>{{ f.id }}</td><td>{{ f.device_id }}</td><td>{{ f.level }}</td><td>{{ f.code }}</td><td>{{ f.message }}</td><td>{{ f.created_at }}</td></tr>
    {% endfor %}
  </tbody>
</table>
<script>
  new DataTable('table', {
    pageLength: 20,
    pagingType: 'simple_numbers',
    dom: 't<"d-flex justify-content-between align-items-center mt-2"ip>',
    language: {
      paginate: { previous: '上一页', next: '下一页' },
      info: '第 _PAGE_ / 共 _PAGES_ 页（共 _TOTAL_ 条）',
      infoEmpty: '无记录',
      zeroRecords: '无匹配记录'
    }
  });
</script>
{% endblock %}
