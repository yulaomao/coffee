{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-2">
  <h3 class="m-0">订单</h3>
  <a class="btn btn-outline-secondary" href="/api/orders?format=csv">导出 CSV</a>
  </div>
<table id="ordersTable" class="table table-striped table-sm">
  <thead><tr><th>ID</th><th>设备</th><th>金额</th><th>状态</th><th>时间</th></tr></thead>
  <tbody>
    {% for o in orders %}
    <tr><td>{{ o.id }}</td><td>{{ o.device_id }}</td><td>{{ o.price }}</td><td>{{ o.status }}</td><td>{{ o.created_at }}</td></tr>
    {% endfor %}
  </tbody>
</table>
<script>
  new DataTable('#ordersTable', {
    order: [[0, 'desc']],
    pageLength: 20
  });
  </script>
{% endblock %}
