{% extends 'base.html' %}
{% block content %}
<h3>升级管理</h3>
<form id="uploadForm" enctype="multipart/form-data">
  <div class="row g-2 align-items-center">
    <div class="col-auto"><input class="form-control" type="file" name="file" required></div>
    <div class="col-auto"><input class="form-control" name="version" placeholder="版本号" value="v1"></div>
    <div class="col-auto"><button class="btn btn-primary" type="submit">上传</button></div>
  </div>
</form>
<script>
  document.getElementById('uploadForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    const resp = await fetch('/api/upgrades', { method:'POST', body: fd });
    alert(await resp.text());
  });
</script>
{% endblock %}
